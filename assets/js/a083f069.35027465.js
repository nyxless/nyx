"use strict";(self.webpackChunkmy_docs=self.webpackChunkmy_docs||[]).push([[8318],{2207:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"project-structure","title":"03. \u9879\u76ee\u7ed3\u6784\u4e0e\u5f00\u53d1\u89c4\u8303","description":"\u5728\u5f00\u59cb\u6df1\u5165\u5b66\u4e60 Nyx \u6846\u67b6\u7684\u5177\u4f53\u529f\u80fd\u4e4b\u524d\uff0c\u5efa\u7acb\u826f\u597d\u7684\u9879\u76ee\u7ed3\u6784\u548c\u9075\u5faa\u7edf\u4e00\u7684\u5f00\u53d1\u89c4\u8303\u662f\u81f3\u5173\u91cd\u8981\u7684\u3002\u672c\u7ae0\u5c06\u8be6\u7ec6\u4ecb\u7ecd Nyx \u9879\u76ee\u7684\u6807\u51c6\u76ee\u5f55\u7ed3\u6784\u3001\u4ee3\u7801\u7ec4\u7ec7\u65b9\u5f0f\u4ee5\u53ca\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u5e2e\u52a9\u60a8\u6784\u5efa\u89c4\u8303\u3001\u53ef\u7ef4\u62a4\u7684\u9879\u76ee\u67b6\u6784\u3002","source":"@site/docs/03-project-structure.md","sourceDirName":".","slug":"/project-structure","permalink":"/docs/project-structure","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03-project-structure.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"02. Nyx \u811a\u624b\u67b6\u5de5\u5177","permalink":"/docs/scaffolding"},"next":{"title":"04. \u6838\u5fc3\u6982\u5ff5\u8be6\u89e3","permalink":"/docs/core-concepts"}}');var l=r(4848),i=r(8453);const d={},c="03. \u9879\u76ee\u7ed3\u6784\u4e0e\u5f00\u53d1\u89c4\u8303",o={},a=[{value:"3.1 \u6807\u51c6\u9879\u76ee\u7ed3\u6784",id:"31-\u6807\u51c6\u9879\u76ee\u7ed3\u6784",level:2},{value:"3.1.1 \u5b8c\u6574\u7684\u9879\u76ee\u76ee\u5f55\u7ed3\u6784",id:"311-\u5b8c\u6574\u7684\u9879\u76ee\u76ee\u5f55\u7ed3\u6784",level:3},{value:"3.1.2 \u6838\u5fc3\u76ee\u5f55\u8be6\u89e3",id:"312-\u6838\u5fc3\u76ee\u5f55\u8be6\u89e3",level:3},{value:"<code>main.go</code> - \u7a0b\u5e8f\u5165\u53e3",id:"maingo---\u7a0b\u5e8f\u5165\u53e3",level:4},{value:"<code>conf/</code> - \u914d\u7f6e\u7ba1\u7406",id:"conf---\u914d\u7f6e\u7ba1\u7406",level:4},{value:"<code>controller/</code> - \u8bf7\u6c42\u5904\u7406\u5c42",id:"controller---\u8bf7\u6c42\u5904\u7406\u5c42",level:4},{value:"<code>service/</code> - \u4e1a\u52a1\u903b\u8f91\u5c42",id:"service---\u4e1a\u52a1\u903b\u8f91\u5c42",level:4},{value:"<code>dao/</code> - \u6570\u636e\u8bbf\u95ee\u5c42",id:"dao---\u6570\u636e\u8bbf\u95ee\u5c42",level:4},{value:"3.2 \u547d\u540d\u89c4\u8303",id:"32-\u547d\u540d\u89c4\u8303",level:2},{value:"3.2.1 \u6587\u4ef6\u547d\u540d\u89c4\u8303",id:"321-\u6587\u4ef6\u547d\u540d\u89c4\u8303",level:3},{value:"Go \u6587\u4ef6\u547d\u540d",id:"go-\u6587\u4ef6\u547d\u540d",level:4},{value:"\u76ee\u5f55\u547d\u540d",id:"\u76ee\u5f55\u547d\u540d",level:4},{value:"3.2.2 \u53d8\u91cf\u548c\u51fd\u6570\u547d\u540d",id:"322-\u53d8\u91cf\u548c\u51fd\u6570\u547d\u540d",level:3},{value:"\u53d8\u91cf\u547d\u540d",id:"\u53d8\u91cf\u547d\u540d",level:4},{value:"\u51fd\u6570\u547d\u540d",id:"\u51fd\u6570\u547d\u540d",level:4},{value:"3.3 \u4ee3\u7801\u7ec4\u7ec7\u89c4\u8303",id:"33-\u4ee3\u7801\u7ec4\u7ec7\u89c4\u8303",level:2},{value:"3.3.1 \u63a7\u5236\u5668\u5c42\u7ec4\u7ec7",id:"331-\u63a7\u5236\u5668\u5c42\u7ec4\u7ec7",level:3},{value:"\u57fa\u7840\u63a7\u5236\u5668\u7ed3\u6784",id:"\u57fa\u7840\u63a7\u5236\u5668\u7ed3\u6784",level:4},{value:"\u4e1a\u52a1\u63a7\u5236\u5668\u5b9e\u73b0",id:"\u4e1a\u52a1\u63a7\u5236\u5668\u5b9e\u73b0",level:4},{value:"3.3.2 \u670d\u52a1\u5c42\u7ec4\u7ec7",id:"332-\u670d\u52a1\u5c42\u7ec4\u7ec7",level:3},{value:"\u670d\u52a1\u63a5\u53e3\u5b9a\u4e49",id:"\u670d\u52a1\u63a5\u53e3\u5b9a\u4e49",level:4},{value:"\u670d\u52a1\u5b9e\u73b0",id:"\u670d\u52a1\u5b9e\u73b0",level:4},{value:"3.3.3 DAO \u5c42\u7ec4\u7ec7",id:"333-dao-\u5c42\u7ec4\u7ec7",level:3},{value:"\u57fa\u7840 DAO \u7ed3\u6784",id:"\u57fa\u7840-dao-\u7ed3\u6784",level:4},{value:"3.4 \u914d\u7f6e\u7ba1\u7406\u89c4\u8303",id:"34-\u914d\u7f6e\u7ba1\u7406\u89c4\u8303",level:2},{value:"3.4.1 \u914d\u7f6e\u6587\u4ef6\u7ec4\u7ec7",id:"341-\u914d\u7f6e\u6587\u4ef6\u7ec4\u7ec7",level:3},{value:"app.common.conf - \u901a\u7528\u914d\u7f6e",id:"appcommonconf---\u901a\u7528\u914d\u7f6e",level:4},{value:"app.conf - \u73af\u5883\u7279\u5b9a\u914d\u7f6e",id:"appconf---\u73af\u5883\u7279\u5b9a\u914d\u7f6e",level:4},{value:"3.4.2 \u73af\u5883\u53d8\u91cf\u4f7f\u7528",id:"342-\u73af\u5883\u53d8\u91cf\u4f7f\u7528",level:3},{value:"\u914d\u7f6e\u4f18\u5148\u7ea7",id:"\u914d\u7f6e\u4f18\u5148\u7ea7",level:4},{value:"\u793a\u4f8b\u914d\u7f6e\u4f7f\u7528",id:"\u793a\u4f8b\u914d\u7f6e\u4f7f\u7528",level:4},{value:"3.5 \u6570\u636e\u5e93\u5f00\u53d1\u89c4\u8303",id:"35-\u6570\u636e\u5e93\u5f00\u53d1\u89c4\u8303",level:2},{value:"3.5.1 \u8868\u8bbe\u8ba1\u89c4\u8303",id:"351-\u8868\u8bbe\u8ba1\u89c4\u8303",level:3},{value:"\u901a\u7528\u5b57\u6bb5",id:"\u901a\u7528\u5b57\u6bb5",level:4},{value:"\u7d22\u5f15\u89c4\u8303",id:"\u7d22\u5f15\u89c4\u8303",level:4},{value:"3.5.2 ORM \u4f7f\u7528\u89c4\u8303",id:"352-orm-\u4f7f\u7528\u89c4\u8303",level:3},{value:"\u6a21\u578b\u5b9a\u4e49",id:"\u6a21\u578b\u5b9a\u4e49",level:4},{value:"3.6 API \u8bbe\u8ba1\u89c4\u8303",id:"36-api-\u8bbe\u8ba1\u89c4\u8303",level:2},{value:"3.6.1 RESTful API \u8bbe\u8ba1",id:"361-restful-api-\u8bbe\u8ba1",level:3},{value:"\u8def\u7531\u547d\u540d\u89c4\u8303",id:"\u8def\u7531\u547d\u540d\u89c4\u8303",level:4},{value:"\u54cd\u5e94\u683c\u5f0f\u89c4\u8303",id:"\u54cd\u5e94\u683c\u5f0f\u89c4\u8303",level:4},{value:"\u63a7\u5236\u5668\u5b9e\u73b0",id:"\u63a7\u5236\u5668\u5b9e\u73b0",level:4},{value:"3.7 \u6d4b\u8bd5\u89c4\u8303",id:"37-\u6d4b\u8bd5\u89c4\u8303",level:2},{value:"3.7.1 \u6d4b\u8bd5\u6587\u4ef6\u7ec4\u7ec7",id:"371-\u6d4b\u8bd5\u6587\u4ef6\u7ec4\u7ec7",level:3},{value:"3.7.2 \u5355\u5143\u6d4b\u8bd5\u793a\u4f8b",id:"372-\u5355\u5143\u6d4b\u8bd5\u793a\u4f8b",level:3},{value:"\u670d\u52a1\u5c42\u6d4b\u8bd5",id:"\u670d\u52a1\u5c42\u6d4b\u8bd5",level:4},{value:"\u63a7\u5236\u5668\u6d4b\u8bd5",id:"\u63a7\u5236\u5668\u6d4b\u8bd5",level:4},{value:"3.8 \u7248\u672c\u63a7\u5236\u89c4\u8303",id:"38-\u7248\u672c\u63a7\u5236\u89c4\u8303",level:2},{value:"3.8.1 Git \u63d0\u4ea4\u89c4\u8303",id:"381-git-\u63d0\u4ea4\u89c4\u8303",level:3},{value:"\u63d0\u4ea4\u4fe1\u606f\u683c\u5f0f",id:"\u63d0\u4ea4\u4fe1\u606f\u683c\u5f0f",level:4},{value:"\u7c7b\u578b\u5b9a\u4e49",id:"\u7c7b\u578b\u5b9a\u4e49",level:4},{value:"\u63d0\u4ea4\u793a\u4f8b",id:"\u63d0\u4ea4\u793a\u4f8b",level:4},{value:"3.8.2 \u5206\u652f\u7ba1\u7406",id:"382-\u5206\u652f\u7ba1\u7406",level:3},{value:"\u5206\u652f\u547d\u540d\u89c4\u8303",id:"\u5206\u652f\u547d\u540d\u89c4\u8303",level:4},{value:"\u5de5\u4f5c\u6d41\u7a0b",id:"\u5de5\u4f5c\u6d41\u7a0b",level:4},{value:"3.9 \u6587\u6863\u89c4\u8303",id:"39-\u6587\u6863\u89c4\u8303",level:2},{value:"3.9.1 \u4ee3\u7801\u6ce8\u91ca",id:"391-\u4ee3\u7801\u6ce8\u91ca",level:3},{value:"\u51fd\u6570\u6ce8\u91ca",id:"\u51fd\u6570\u6ce8\u91ca",level:4},{value:"\u7ed3\u6784\u4f53\u6ce8\u91ca",id:"\u7ed3\u6784\u4f53\u6ce8\u91ca",level:4},{value:"3.9.2 API \u6587\u6863",id:"392-api-\u6587\u6863",level:3},{value:"\u6587\u6863\u6ce8\u91ca",id:"\u6587\u6863\u6ce8\u91ca",level:4},{value:"3.10 \u90e8\u7f72\u89c4\u8303",id:"310-\u90e8\u7f72\u89c4\u8303",level:2},{value:"3.10.1 Docker \u5316",id:"3101-docker-\u5316",level:3},{value:"Dockerfile",id:"dockerfile",level:4},{value:"docker-compose.yml",id:"docker-composeyml",level:4},{value:"3.10.2 \u73af\u5883\u914d\u7f6e",id:"3102-\u73af\u5883\u914d\u7f6e",level:3},{value:"\u751f\u4ea7\u73af\u5883\u53d8\u91cf",id:"\u751f\u4ea7\u73af\u5883\u53d8\u91cf",level:4},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function t(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"03-\u9879\u76ee\u7ed3\u6784\u4e0e\u5f00\u53d1\u89c4\u8303",children:"03. \u9879\u76ee\u7ed3\u6784\u4e0e\u5f00\u53d1\u89c4\u8303"})}),"\n",(0,l.jsx)(n.p,{children:"\u5728\u5f00\u59cb\u6df1\u5165\u5b66\u4e60 Nyx \u6846\u67b6\u7684\u5177\u4f53\u529f\u80fd\u4e4b\u524d\uff0c\u5efa\u7acb\u826f\u597d\u7684\u9879\u76ee\u7ed3\u6784\u548c\u9075\u5faa\u7edf\u4e00\u7684\u5f00\u53d1\u89c4\u8303\u662f\u81f3\u5173\u91cd\u8981\u7684\u3002\u672c\u7ae0\u5c06\u8be6\u7ec6\u4ecb\u7ecd Nyx \u9879\u76ee\u7684\u6807\u51c6\u76ee\u5f55\u7ed3\u6784\u3001\u4ee3\u7801\u7ec4\u7ec7\u65b9\u5f0f\u4ee5\u53ca\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u5e2e\u52a9\u60a8\u6784\u5efa\u89c4\u8303\u3001\u53ef\u7ef4\u62a4\u7684\u9879\u76ee\u67b6\u6784\u3002"}),"\n",(0,l.jsx)(n.h2,{id:"31-\u6807\u51c6\u9879\u76ee\u7ed3\u6784",children:"3.1 \u6807\u51c6\u9879\u76ee\u7ed3\u6784"}),"\n",(0,l.jsx)(n.h3,{id:"311-\u5b8c\u6574\u7684\u9879\u76ee\u76ee\u5f55\u7ed3\u6784",children:"3.1.1 \u5b8c\u6574\u7684\u9879\u76ee\u76ee\u5f55\u7ed3\u6784"}),"\n",(0,l.jsx)(n.p,{children:"\u4e00\u4e2a\u89c4\u8303\u7684 Nyx \u9879\u76ee\u5e94\u8be5\u9075\u5faa\u4ee5\u4e0b\u76ee\u5f55\u7ed3\u6784\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"my-nyx-project/\n\u251c\u2500\u2500 main.go                    # \u7a0b\u5e8f\u5165\u53e3\u70b9\n\u251c\u2500\u2500 go.mod                     # Go \u6a21\u5757\u5b9a\u4e49\n\u251c\u2500\u2500 conf/                      # \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 app.common.conf       # \u901a\u7528\u914d\u7f6e\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 app.conf.dev          # \u5f00\u53d1\u73af\u5883\u914d\u7f6e\n\u2502   \u251c\u2500\u2500 app.conf.test         # \u6d4b\u8bd5\u73af\u5883\u914d\u7f6e\n\u2502   \u2514\u2500\u2500 app.conf.prod         # \u751f\u4ea7\u73af\u5883\u914d\u7f6e\n\u251c\u2500\u2500 controller/                # \u63a7\u5236\u5668\u5c42\n\u2502   \u251c\u2500\u2500 api/                   # HTTP API \u63a7\u5236\u5668\n\u2502   \u2502   \u251c\u2500\u2500 base_controller.go # \u57fa\u7840\u63a7\u5236\u5668\n\u2502   \u2502   \u2514\u2500\u2500 user_controller.go # \u7528\u6237\u63a7\u5236\u5668\n\u2502   \u2514\u2500\u2500 rpc/                   # gRPC \u63a7\u5236\u5668\n\u2502       \u2514\u2500\u2500 user_controller.go # \u7528\u6237 RPC \u63a5\u53e3\n\u251c\u2500\u2500 svc/                      # \u670d\u52a1\u5c42 (\u4e1a\u52a1\u903b\u8f91)\n\u2502   \u2514\u2500\u2500 user_svc.go           # \u7528\u6237\u670d\u52a1\n\u251c\u2500\u2500 dao/                      # \u6570\u636e\u8bbf\u95ee\u5c42\n\u2502   \u2514\u2500\u2500 user_dao.go          # \u7528\u6237\u6570\u636e\u5c42\n\u251c\u2500\u2500 model/                   # \u6570\u636e\u6a21\u578b\n\u2502   \u2514\u2500\u2500 user.go              # \u7528\u6237\u6a21\u578b\n\u251c\u2500\u2500 middleware/              # \u4e2d\u95f4\u4ef6\n\u2502   \u251c\u2500\u2500 auth.go              # \u8ba4\u8bc1\u4e2d\u95f4\u4ef6\n\u2502   \u2514\u2500\u2500 rate.go              # \u9650\u6d41\u4e2d\u95f4\u4ef6\n\u251c\u2500\u2500 utils/                   # \u5de5\u5177\u51fd\u6570\n\u2502   \u251c\u2500\u2500 crypto.go            # \u52a0\u5bc6\u5de5\u5177\n\u2502   \u251c\u2500\u2500 time.go              # \u65f6\u95f4\u5904\u7406\n\u2502   \u2514\u2500\u2500 validation.go        # \u9a8c\u8bc1\u5de5\u5177\n\u251c\u2500\u2500 tools/                   # \u5f00\u53d1\u5de5\u5177\n\u2502   \u251c\u2500\u2500 gen_orm.go          # ORM \u4ee3\u7801\u751f\u6210\u5668\n\u2502   \u251c\u2500\u2500 gen_dao             # DAO \u751f\u6210\u5668\n\u2502   \u2514\u2500\u2500 test_rpc.go         # RPC \u6d4b\u8bd5\u5de5\u5177\n\u251c\u2500\u2500 static/                  # \u9759\u6001\u8d44\u6e90\n\u2502   \u251c\u2500\u2500 css/                 # \u6837\u5f0f\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 js/                  # JavaScript \u6587\u4ef6\n\u2502   \u2514\u2500\u2500 images/              # \u56fe\u7247\u8d44\u6e90\n\u251c\u2500\u2500 docs/                    # \u9879\u76ee\u6587\u6863\n\u2502   \u251c\u2500\u2500 api/                 # API \u6587\u6863\n\u2502   \u2514\u2500\u2500 development.md      # \u5f00\u53d1\u6587\u6863\n\u251c\u2500\u2500 tests/                   # \u6d4b\u8bd5\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 unit/               # \u5355\u5143\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 integration/        # \u96c6\u6210\u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 fixtures/           # \u6d4b\u8bd5\u6570\u636e\n\u251c\u2500\u2500 logs/                    # \u65e5\u5fd7\u6587\u4ef6 (\u8fd0\u884c\u65f6\u751f\u6210)\n\u251c\u2500\u2500 backup/                  # \u81ea\u52a8\u5907\u4efd\u76ee\u5f55\n\u251c\u2500\u2500 Dockerfile              # Docker \u6784\u5efa\u6587\u4ef6\n\u251c\u2500\u2500 docker-compose.yml      # Docker Compose \u914d\u7f6e\n\u251c\u2500\u2500 Makefile               # \u6784\u5efa\u811a\u672c\n\u2514\u2500\u2500 README.md              # \u9879\u76ee\u8bf4\u660e\n"})}),"\n",(0,l.jsx)(n.h3,{id:"312-\u6838\u5fc3\u76ee\u5f55\u8be6\u89e3",children:"3.1.2 \u6838\u5fc3\u76ee\u5f55\u8be6\u89e3"}),"\n",(0,l.jsxs)(n.h4,{id:"maingo---\u7a0b\u5e8f\u5165\u53e3",children:[(0,l.jsx)(n.code,{children:"main.go"})," - \u7a0b\u5e8f\u5165\u53e3"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/nyxless/nyx"\n)\n\nfunc main() {\n    app := nyx.NewNyx()\n    app.Run()\n}\n'})}),"\n",(0,l.jsxs)(n.h4,{id:"conf---\u914d\u7f6e\u7ba1\u7406",children:[(0,l.jsx)(n.code,{children:"conf/"})," - \u914d\u7f6e\u7ba1\u7406"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"app.conf"}),": \u73af\u5883\u7279\u5b9a\u914d\u7f6e\uff0c\u5305\u542b\u73af\u5883\u6807\u8bc6\u3001\u7aef\u53e3\u8bbe\u7f6e\u7b49"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"app.common.conf"}),": \u901a\u7528\u914d\u7f6e\uff0c\u6240\u6709\u73af\u5883\u5171\u4eab\u7684\u8bbe\u7f6e"]}),"\n"]}),"\n",(0,l.jsxs)(n.h4,{id:"controller---\u8bf7\u6c42\u5904\u7406\u5c42",children:[(0,l.jsx)(n.code,{children:"controller/"})," - \u8bf7\u6c42\u5904\u7406\u5c42"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"api/"}),": \u5904\u7406 HTTP \u8bf7\u6c42\u7684\u63a7\u5236\u5668"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"rpc/"}),": \u5904\u7406 gRPC \u8bf7\u6c42\u7684\u63a7\u5236\u5668"]}),"\n"]}),"\n",(0,l.jsxs)(n.h4,{id:"service---\u4e1a\u52a1\u903b\u8f91\u5c42",children:[(0,l.jsx)(n.code,{children:"service/"})," - \u4e1a\u52a1\u903b\u8f91\u5c42"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5305\u542b\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u5b9e\u73b0"}),"\n",(0,l.jsx)(n.li,{children:"\u534f\u8c03 DAO \u548c\u6a21\u578b\u5c42"}),"\n"]}),"\n",(0,l.jsxs)(n.h4,{id:"dao---\u6570\u636e\u8bbf\u95ee\u5c42",children:[(0,l.jsx)(n.code,{children:"dao/"})," - \u6570\u636e\u8bbf\u95ee\u5c42"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6570\u636e\u5e93\u64cd\u4f5c\u5c01\u88c5"}),"\n",(0,l.jsx)(n.li,{children:"\u652f\u6301\u8bfb\u5199\u5206\u79bb\u548c\u4e8b\u52a1"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"32-\u547d\u540d\u89c4\u8303",children:"3.2 \u547d\u540d\u89c4\u8303"}),"\n",(0,l.jsx)(n.h3,{id:"321-\u6587\u4ef6\u547d\u540d\u89c4\u8303",children:"3.2.1 \u6587\u4ef6\u547d\u540d\u89c4\u8303"}),"\n",(0,l.jsx)(n.h4,{id:"go-\u6587\u4ef6\u547d\u540d",children:"Go \u6587\u4ef6\u547d\u540d"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u63a7\u5236\u5668\u6587\u4ef6"}),": ",(0,l.jsx)(n.code,{children:"{name}_controller.go"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"user_controller.go"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"order_controller.go"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u670d\u52a1\u6587\u4ef6"}),": ",(0,l.jsx)(n.code,{children:"{name}.go"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"user_service.go"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"auth_service.go"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"DAO \u6587\u4ef6"}),": ",(0,l.jsx)(n.code,{children:"{name}_dao.go"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"user_dao.go"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"order_dao.go"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u6a21\u578b\u6587\u4ef6"}),": ",(0,l.jsx)(n.code,{children:"{name}.go"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"user.go"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"order.go"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u76ee\u5f55\u547d\u540d",children:"\u76ee\u5f55\u547d\u540d"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u590d\u6570\u5f62\u5f0f"}),": ",(0,l.jsx)(n.code,{children:"controller/"}),", ",(0,l.jsx)(n.code,{children:"service/"}),", ",(0,l.jsx)(n.code,{children:"dao/"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5c0f\u5199\u5b57\u6bcd"}),": ",(0,l.jsx)(n.code,{children:"middleware/"}),", ",(0,l.jsx)(n.code,{children:"utils/"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"322-\u53d8\u91cf\u548c\u51fd\u6570\u547d\u540d",children:"3.2.2 \u53d8\u91cf\u548c\u51fd\u6570\u547d\u540d"}),"\n",(0,l.jsx)(n.h4,{id:"\u53d8\u91cf\u547d\u540d",children:"\u53d8\u91cf\u547d\u540d"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"// \u63a8\u8350\u4f7f\u7528\u9a7c\u5cf0\u547d\u540d\u6cd5\nvar UserID int64\nvar UserName string\nvar IsActive bool\n\n// \u907f\u514d\u7f29\u5199\nvar UID int64          // \u4e0d\u63a8\u8350\nvar UserIdentifier int64 // \u63a8\u8350\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u51fd\u6570\u547d\u540d",children:"\u51fd\u6570\u547d\u540d"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"// \u63a7\u5236\u5668\u65b9\u6cd5\u547d\u540d\uff1a{\u64cd\u4f5c}Action\nfunc (c *UserController) CreateUserAction() {}\nfunc (c *UserController) UpdateUserAction() {}\nfunc (c *UserController) DeleteUserAction() {}\n\n// \u670d\u52a1\u65b9\u6cd5\u547d\u540d\uff1a\u9a7c\u5cf0\u547d\u540d\nfunc (s *UserService) CreateUser(user *model.User) error {}\nfunc (s *UserService) GetUserByID(id int64) (*model.User, error) {}\n\n// DAO \u65b9\u6cd5\u547d\u540d\uff1a\u9a7c\u5cf0\u547d\u540d + \u63cf\u8ff0\u6027\u540e\u7f00\nfunc (d *UserDao) Insert(user *model.User) error {}\nfunc (d *UserDao) FindByID(id int64) (*model.User, error) {}\nfunc (d *UserDao) UpdateByID(id int64, updates map[string]interface{}) error {}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"33-\u4ee3\u7801\u7ec4\u7ec7\u89c4\u8303",children:"3.3 \u4ee3\u7801\u7ec4\u7ec7\u89c4\u8303"}),"\n",(0,l.jsx)(n.h3,{id:"331-\u63a7\u5236\u5668\u5c42\u7ec4\u7ec7",children:"3.3.1 \u63a7\u5236\u5668\u5c42\u7ec4\u7ec7"}),"\n",(0,l.jsx)(n.h4,{id:"\u57fa\u7840\u63a7\u5236\u5668\u7ed3\u6784",children:"\u57fa\u7840\u63a7\u5236\u5668\u7ed3\u6784"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"type BaseController struct {\n    controller.HTTP  // HTTP \u57fa\u7840\u529f\u80fd\n    Auth *service.Auth // \u8ba4\u8bc1\u670d\u52a1\n    UserID int64    // \u5f53\u524d\u7528\u6237 ID\n}\n\n// Init \u65b9\u6cd5\u521d\u59cb\u5316\u63a7\u5236\u5668\nfunc (c *BaseController) Init() {\n    c.Auth = service.NewAuth(c.W, c.R)\n    c.Interceptor(c.Auth.CheckLogin(), common.ERR_TOKEN)\n    c.UserID = c.Auth.GetUserID()\n}\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u4e1a\u52a1\u63a7\u5236\u5668\u5b9e\u73b0",children:"\u4e1a\u52a1\u63a7\u5236\u5668\u5b9e\u73b0"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'type UserController struct {\n    BaseController    // \u7ee7\u627f\u57fa\u7840\u63a7\u5236\u5668\n    UserService *service.UserService\n}\n\nfunc (c *UserController) Init() {\n    c.BaseController.Init()\n    c.UserService = service.NewUserService()\n}\n\nfunc (c *UserController) CreateUserAction() {\n    // \u53c2\u6570\u9a8c\u8bc1\n    username := c.GetParam("username")\n    email := c.GetParam("email")\n    \n    if username == "" || email == "" {\n        c.RenderJSON(common.ERR_PARAM, "\u7528\u6237\u540d\u548c\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a")\n        return\n    }\n    \n    // \u4e1a\u52a1\u903b\u8f91\n    user := &model.User{\n        Username: username,\n        Email:    email,\n    }\n    \n    err := c.UserService.CreateUser(user)\n    if err != nil {\n        c.RenderJSON(common.ERR_SYSTEM, err.Error())\n        return\n    }\n    \n    c.RenderJSON(common.SUCCESS, user)\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"332-\u670d\u52a1\u5c42\u7ec4\u7ec7",children:"3.3.2 \u670d\u52a1\u5c42\u7ec4\u7ec7"}),"\n",(0,l.jsx)(n.h4,{id:"\u670d\u52a1\u63a5\u53e3\u5b9a\u4e49",children:"\u670d\u52a1\u63a5\u53e3\u5b9a\u4e49"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"type UserService interface {\n    CreateUser(user *model.User) error\n    GetUserByID(id int64) (*model.User, error)\n    UpdateUser(id int64, updates map[string]interface{}) error\n    DeleteUser(id int64) error\n}\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u670d\u52a1\u5b9e\u73b0",children:"\u670d\u52a1\u5b9e\u73b0"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"type UserServiceImpl struct {\n    UserDao   *dao.UserDao\n    Validator *validation.Validator\n}\n\nfunc NewUserService() UserService {\n    return &UserServiceImpl{\n        UserDao:   dao.NewUserDao(),\n        Validator: validation.NewValidator(),\n    }\n}\n\nfunc (s *UserServiceImpl) CreateUser(user *model.User) error {\n    // \u6570\u636e\u9a8c\u8bc1\n    if err := s.Validator.Validate(user); err != nil {\n        return err\n    }\n    \n    // \u6267\u884c\u4e1a\u52a1\u903b\u8f91\n    return s.UserDao.Insert(user)\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"333-dao-\u5c42\u7ec4\u7ec7",children:"3.3.3 DAO \u5c42\u7ec4\u7ec7"}),"\n",(0,l.jsx)(n.h4,{id:"\u57fa\u7840-dao-\u7ed3\u6784",children:"\u57fa\u7840 DAO \u7ed3\u6784"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'type UserDao struct {\n    dao.Dao\n}\n\nfunc NewUserDao() *UserDao {\n    dao := &UserDao{}\n    dao.Init()\n    dao.SetTable("users")\n    dao.SetPrimary("id")\n    return dao\n}\n\n// \u63d2\u5165\u7528\u6237\nfunc (d *UserDao) Insert(user *model.User) error {\n    return d.InsertRecord(user)\n}\n\n// \u6839\u636e ID \u67e5\u8be2\u7528\u6237\nfunc (d *UserDao) FindByID(id int64) (*model.User, error) {\n    user := &model.User{}\n    err := d.FindByPrimary(id, user)\n    return user, err\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"34-\u914d\u7f6e\u7ba1\u7406\u89c4\u8303",children:"3.4 \u914d\u7f6e\u7ba1\u7406\u89c4\u8303"}),"\n",(0,l.jsx)(n.h3,{id:"341-\u914d\u7f6e\u6587\u4ef6\u7ec4\u7ec7",children:"3.4.1 \u914d\u7f6e\u6587\u4ef6\u7ec4\u7ec7"}),"\n",(0,l.jsx)(n.h4,{id:"appcommonconf---\u901a\u7528\u914d\u7f6e",children:"app.common.conf - \u901a\u7528\u914d\u7f6e"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'# \u6570\u636e\u5e93\u914d\u7f6e\n[db_master]\ntype = "mysql"\nhost = "${DB_HOST:localhost:3306}"\nusername = "${DB_USERNAME:root}"\npassword = "${DB_PASSWORD:password}"\ndatabase = "${DB_DATABASE:myapp}"\n\n[db_slave]\ntype = "mysql"\nhost = "${DB_SLAVE_HOST:localhost:3306}"\nusername = "${DB_USERNAME:root}"\npassword = "${DB_PASSWORD:password}"\ndatabase = "${DB_DATABASE:myapp}"\n\n# Redis \u914d\u7f6e\n[redis]\nhost = "${REDIS_HOST:localhost:6379}"\npassword = "${REDIS_PASSWORD:}"\ndb = 0\n\n# \u65e5\u5fd7\u914d\u7f6e\n[log]\nlevel = "${LOG_LEVEL:info}"\nfile = "logs/app.log"\nmax_size = 100\nmax_age = 30\nmax_backups = 10\n'})}),"\n",(0,l.jsx)(n.h4,{id:"appconf---\u73af\u5883\u7279\u5b9a\u914d\u7f6e",children:"app.conf - \u73af\u5883\u7279\u5b9a\u914d\u7f6e"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'!include ../conf/app.common.conf\n\n# \u73af\u5883\u6807\u8bc6\nenv_mode = "dev"  # dev, test, prod\n\n# \u5e94\u7528\u914d\u7f6e\napp_name = "myapp"\ndebug = true\nport = 8080\n\n# \u8ba4\u8bc1\u914d\u7f6e\n[jwt]\nsecret = "${JWT_SECRET:your-secret-key}"\nexpire = 86400\n\n# RPC \u5ba2\u6237\u7aef\u914d\u7f6e\n[rpc_client_user_service]\nhost = "${USER_SERVICE_HOST:localhost:8081}"\nappid = "${USER_SERVICE_APPID:user_service}"\nsecret = "${USER_SERVICE_SECRET:secret123}"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"342-\u73af\u5883\u53d8\u91cf\u4f7f\u7528",children:"3.4.2 \u73af\u5883\u53d8\u91cf\u4f7f\u7528"}),"\n",(0,l.jsx)(n.h4,{id:"\u914d\u7f6e\u4f18\u5148\u7ea7",children:"\u914d\u7f6e\u4f18\u5148\u7ea7"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u547d\u4ee4\u884c\u53c2\u6570"}),": \u6700\u9ad8\u4f18\u5148\u7ea7"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u73af\u5883\u53d8\u91cf"}),": \u4e2d\u7b49\u4f18\u5148\u7ea7"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u914d\u7f6e\u6587\u4ef6"}),": \u9ed8\u8ba4\u503c"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u793a\u4f8b\u914d\u7f6e\u4f7f\u7528",children:"\u793a\u4f8b\u914d\u7f6e\u4f7f\u7528"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// \u5728\u4ee3\u7801\u4e2d\u8bfb\u53d6\u914d\u7f6e\nfunc GetDatabaseConfig() {\n    host := x.Conf.GetString("db_master.host")\n    username := x.Conf.GetString("db_master.username")\n    password := x.Conf.GetString("db_master.password")\n    \n    // \u73af\u5883\u53d8\u91cf\u793a\u4f8b\n    dbHost := os.Getenv("DB_HOST")\n    if dbHost != "" {\n        host = dbHost\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"35-\u6570\u636e\u5e93\u5f00\u53d1\u89c4\u8303",children:"3.5 \u6570\u636e\u5e93\u5f00\u53d1\u89c4\u8303"}),"\n",(0,l.jsx)(n.h3,{id:"351-\u8868\u8bbe\u8ba1\u89c4\u8303",children:"3.5.1 \u8868\u8bbe\u8ba1\u89c4\u8303"}),"\n",(0,l.jsx)(n.h4,{id:"\u901a\u7528\u5b57\u6bb5",children:"\u901a\u7528\u5b57\u6bb5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"-- \u6240\u6709\u4e1a\u52a1\u8868\u90fd\u5e94\u8be5\u5305\u542b\u8fd9\u4e9b\u5b57\u6bb5\nCREATE TABLE `users` (\n    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '\u4e3b\u952e',\n    `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '\u521b\u5efa\u65f6\u95f4',\n    `updated_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '\u66f4\u65b0\u65f6\u95f4',\n    `deleted_at` TIMESTAMP NULL DEFAULT NULL COMMENT '\u5220\u9664\u65f6\u95f4 (\u8f6f\u5220\u9664)',\n    \n    -- \u4e1a\u52a1\u5b57\u6bb5\n    `username` VARCHAR(50) NOT NULL COMMENT '\u7528\u6237\u540d',\n    `email` VARCHAR(100) NOT NULL COMMENT '\u90ae\u7bb1',\n    `status` TINYINT NOT NULL DEFAULT 1 COMMENT '\u72b6\u6001\uff1a1-\u6b63\u5e38\uff0c0-\u7981\u7528',\n    \n    PRIMARY KEY (`id`),\n    UNIQUE KEY `username` (`username`),\n    UNIQUE KEY `email` (`email`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='\u7528\u6237\u8868';\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u7d22\u5f15\u89c4\u8303",children:"\u7d22\u5f15\u89c4\u8303"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"-- \u4e3b\u952e\u7d22\u5f15 (\u81ea\u52a8\u521b\u5efa)\n-- \u552f\u4e00\u7d22\u5f15\uff1a\u786e\u4fdd\u6570\u636e\u552f\u4e00\u6027\n-- \u666e\u901a\u7d22\u5f15\uff1a\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\n-- \u590d\u5408\u7d22\u5f15\uff1a\u591a\u5b57\u6bb5\u67e5\u8be2\u4f18\u5316\n\n-- \u793a\u4f8b\uff1a\u7528\u6237\u8868\u7d22\u5f15\nCREATE INDEX `idx_status_created` ON `users` (`status`, `created_at`);\nCREATE INDEX `idx_email_status` ON `users` (`email`, `status`);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"352-orm-\u4f7f\u7528\u89c4\u8303",children:"3.5.2 ORM \u4f7f\u7528\u89c4\u8303"}),"\n",(0,l.jsx)(n.h4,{id:"\u6a21\u578b\u5b9a\u4e49",children:"\u6a21\u578b\u5b9a\u4e49"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'type User struct {\n    ID        int64     `json:"id" xorm:"id"`\n    Username  string    `json:"username" xorm:"username"`\n    Email     string    `json:"email" xorm:"email"`\n    Status    int       `json:"status" xorm:"status"`\n    CreatedAt time.Time `json:"created_at" xorm:"created_at"`\n    UpdatedAt time.Time `json:"updated_at" xorm:"updated_at"`\n    DeletedAt *time.Time `json:"deleted_at" xorm:"deleted_at"`\n}\n\nfunc (User) TableName() string {\n    return "users"\n}\n\n// \u8f6f\u5220\u9664\u67e5\u8be2\nfunc (d *UserDao) FindActiveUsers() ([]*User, error) {\n    var users []*User\n    err := d.Where("deleted_at IS NULL").Find(&users)\n    return users, err\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"36-api-\u8bbe\u8ba1\u89c4\u8303",children:"3.6 API \u8bbe\u8ba1\u89c4\u8303"}),"\n",(0,l.jsx)(n.h3,{id:"361-restful-api-\u8bbe\u8ba1",children:"3.6.1 RESTful API \u8bbe\u8ba1"}),"\n",(0,l.jsx)(n.h4,{id:"\u8def\u7531\u547d\u540d\u89c4\u8303",children:"\u8def\u7531\u547d\u540d\u89c4\u8303"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"GET    /api/users           # \u83b7\u53d6\u7528\u6237\u5217\u8868\nGET    /api/users/{id}      # \u83b7\u53d6\u5355\u4e2a\u7528\u6237\nPOST   /api/users           # \u521b\u5efa\u7528\u6237\nPUT    /api/users/{id}      # \u66f4\u65b0\u7528\u6237\nDELETE /api/users/{id}      # \u5220\u9664\u7528\u6237\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u54cd\u5e94\u683c\u5f0f\u89c4\u8303",children:"\u54cd\u5e94\u683c\u5f0f\u89c4\u8303"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// \u7edf\u4e00\u54cd\u5e94\u7ed3\u6784\ntype APIResponse struct {\n    Code    int         `json:"code"`\n    Message string      `json:"message"`\n    Data    interface{} `json:"data,omitempty"`\n    Meta    *Meta       `json:"meta,omitempty"`\n}\n\ntype Meta struct {\n    Page     int `json:"page"`\n    PerPage  int `json:"per_page"`\n    Total    int `json:"total"`\n    LastPage int `json:"last_page"`\n}\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u63a7\u5236\u5668\u5b9e\u73b0",children:"\u63a7\u5236\u5668\u5b9e\u73b0"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'func (c *UserController) GetUsersAction() {\n    // \u5206\u9875\u53c2\u6570\n    page := c.GetInt("page", 1)\n    perPage := c.GetInt("per_page", 20)\n    \n    // \u4e1a\u52a1\u903b\u8f91\n    users, total, err := c.UserService.GetUsers(page, perPage)\n    if err != nil {\n        c.RenderJSON(common.ERR_SYSTEM, err.Error())\n        return\n    }\n    \n    // \u54cd\u5e94\u6570\u636e\n    meta := &common.Meta{\n        Page:     page,\n        PerPage:  perPage,\n        Total:    total,\n        LastPage: (total + perPage - 1) / perPage,\n    }\n    \n    c.RenderJSON(common.SUCCESS, users, meta)\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"37-\u6d4b\u8bd5\u89c4\u8303",children:"3.7 \u6d4b\u8bd5\u89c4\u8303"}),"\n",(0,l.jsx)(n.h3,{id:"371-\u6d4b\u8bd5\u6587\u4ef6\u7ec4\u7ec7",children:"3.7.1 \u6d4b\u8bd5\u6587\u4ef6\u7ec4\u7ec7"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"tests/\n\u251c\u2500\u2500 unit/                    # \u5355\u5143\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 controller/         # \u63a7\u5236\u5668\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 service/           # \u670d\u52a1\u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 dao/               # DAO \u6d4b\u8bd5\n\u251c\u2500\u2500 integration/            # \u96c6\u6210\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 api/               # API \u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 db/                # \u6570\u636e\u5e93\u6d4b\u8bd5\n\u251c\u2500\u2500 fixtures/               # \u6d4b\u8bd5\u6570\u636e\n\u2502   \u2514\u2500\u2500 users.json         # \u7528\u6237\u6d4b\u8bd5\u6570\u636e\n\u2514\u2500\u2500 helpers/                # \u6d4b\u8bd5\u8f85\u52a9\u51fd\u6570\n    \u2514\u2500\u2500 test_helper.go     # \u6d4b\u8bd5\u5de5\u5177\u51fd\u6570\n"})}),"\n",(0,l.jsx)(n.h3,{id:"372-\u5355\u5143\u6d4b\u8bd5\u793a\u4f8b",children:"3.7.2 \u5355\u5143\u6d4b\u8bd5\u793a\u4f8b"}),"\n",(0,l.jsx)(n.h4,{id:"\u670d\u52a1\u5c42\u6d4b\u8bd5",children:"\u670d\u52a1\u5c42\u6d4b\u8bd5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'func TestUserService_CreateUser(t *testing.T) {\n    // \u51c6\u5907\u6d4b\u8bd5\u6570\u636e\n    user := &model.User{\n        Username: "testuser",\n        Email:    "test@example.com",\n    }\n    \n    // \u521b\u5efa\u6a21\u62df DAO\n    mockDAO := &MockUserDao{}\n    service := NewUserServiceWithDAO(mockDAO)\n    \n    // \u6267\u884c\u6d4b\u8bd5\n    err := service.CreateUser(user)\n    \n    // \u65ad\u8a00\u7ed3\u679c\n    assert.NoError(t, err)\n    assert.True(t, mockDAO.InsertCalled)\n    assert.Equal(t, user.Username, mockDAO.InsertedUser.Username)\n}\n'})}),"\n",(0,l.jsx)(n.h4,{id:"\u63a7\u5236\u5668\u6d4b\u8bd5",children:"\u63a7\u5236\u5668\u6d4b\u8bd5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'func TestUserController_CreateUserAction(t *testing.T) {\n    // \u521b\u5efa\u6d4b\u8bd5\u63a7\u5236\u5668\n    controller := NewTestUserController()\n    controller.SetParam("username", "testuser")\n    controller.SetParam("email", "test@example.com")\n    \n    // \u6267\u884c\u6d4b\u8bd5\n    controller.CreateUserAction()\n    \n    // \u68c0\u67e5\u54cd\u5e94\n    assert.Equal(t, common.SUCCESS, controller.GetResponseCode())\n    assert.NotNil(t, controller.GetResponseData())\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"38-\u7248\u672c\u63a7\u5236\u89c4\u8303",children:"3.8 \u7248\u672c\u63a7\u5236\u89c4\u8303"}),"\n",(0,l.jsx)(n.h3,{id:"381-git-\u63d0\u4ea4\u89c4\u8303",children:"3.8.1 Git \u63d0\u4ea4\u89c4\u8303"}),"\n",(0,l.jsx)(n.h4,{id:"\u63d0\u4ea4\u4fe1\u606f\u683c\u5f0f",children:"\u63d0\u4ea4\u4fe1\u606f\u683c\u5f0f"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"<type>(<scope>): <subject>\n\n<body>\n\n<footer>\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u7c7b\u578b\u5b9a\u4e49",children:"\u7c7b\u578b\u5b9a\u4e49"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"feat"}),": \u65b0\u529f\u80fd"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"fix"}),": \u4fee\u590d bug"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"docs"}),": \u6587\u6863\u66f4\u65b0"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"style"}),": \u4ee3\u7801\u683c\u5f0f\u8c03\u6574"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"refactor"}),": \u4ee3\u7801\u91cd\u6784"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"test"}),": \u6d4b\u8bd5\u76f8\u5173"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"chore"}),": \u6784\u5efa\u5de5\u5177\u6216\u8f85\u52a9\u5de5\u5177"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u63d0\u4ea4\u793a\u4f8b",children:"\u63d0\u4ea4\u793a\u4f8b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"feat(user): \u6dfb\u52a0\u7528\u6237\u5934\u50cf\u4e0a\u4f20\u529f\u80fd\n\n1. \u5b9e\u73b0\u5934\u50cf\u4e0a\u4f20\u63a5\u53e3\n2. \u6dfb\u52a0\u56fe\u7247\u683c\u5f0f\u9a8c\u8bc1\n3. \u96c6\u6210 CDN \u5b58\u50a8\n\n\u5173\u95ed issue #123\n"})}),"\n",(0,l.jsx)(n.h3,{id:"382-\u5206\u652f\u7ba1\u7406",children:"3.8.2 \u5206\u652f\u7ba1\u7406"}),"\n",(0,l.jsx)(n.h4,{id:"\u5206\u652f\u547d\u540d\u89c4\u8303",children:"\u5206\u652f\u547d\u540d\u89c4\u8303"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"master"}),": \u4e3b\u5206\u652f\uff0c\u751f\u4ea7\u73af\u5883\u4ee3\u7801"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"develop"}),": \u5f00\u53d1\u5206\u652f\uff0c\u96c6\u6210\u529f\u80fd"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"feature/"}),": \u529f\u80fd\u5206\u652f\uff0c\u65b0\u529f\u80fd\u5f00\u53d1"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"hotfix/"}),": \u7d27\u6025\u4fee\u590d\u5206\u652f"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"release/"}),": \u53d1\u5e03\u5206\u652f"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"\u5de5\u4f5c\u6d41\u7a0b",children:"\u5de5\u4f5c\u6d41\u7a0b"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# \u5f00\u53d1\u65b0\u529f\u80fd\ngit checkout develop\ngit pull origin develop\ngit checkout -b feature/user-management\n\n# \u5f00\u53d1\u5b8c\u6210\ngit add .\ngit commit -m "feat(user): \u5b8c\u6210\u7528\u6237\u7ba1\u7406\u529f\u80fd"\ngit push origin feature/user-management\n\n# \u5408\u5e76\u5230\u5f00\u53d1\u5206\u652f\ngit checkout develop\ngit merge feature/user-management\ngit branch -d feature/user-management\n'})}),"\n",(0,l.jsx)(n.h2,{id:"39-\u6587\u6863\u89c4\u8303",children:"3.9 \u6587\u6863\u89c4\u8303"}),"\n",(0,l.jsx)(n.h3,{id:"391-\u4ee3\u7801\u6ce8\u91ca",children:"3.9.1 \u4ee3\u7801\u6ce8\u91ca"}),"\n",(0,l.jsx)(n.h4,{id:"\u51fd\u6570\u6ce8\u91ca",children:"\u51fd\u6570\u6ce8\u91ca"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"// GetUserByID \u6839\u636e\u7528\u6237 ID \u83b7\u53d6\u7528\u6237\u4fe1\u606f\n// \n// \u53c2\u6570:\n//   id - \u7528\u6237 ID\n//\n// \u8fd4\u56de:\n//   *model.User - \u7528\u6237\u4fe1\u606f\n//   error - \u9519\u8bef\u4fe1\u606f\nfunc (s *UserService) GetUserByID(id int64) (*model.User, error) {\n    // \u5b9e\u73b0\u903b\u8f91\n}\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u7ed3\u6784\u4f53\u6ce8\u91ca",children:"\u7ed3\u6784\u4f53\u6ce8\u91ca"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// User \u7528\u6237\u6a21\u578b\n// \n// \u5305\u542b\u7528\u6237\u57fa\u672c\u4fe1\u606f\uff0c\u5982\u7528\u6237\u540d\u3001\u90ae\u7bb1\u3001\u72b6\u6001\u7b49\ntype User struct {\n    ID       int64  `json:"id" xorm:"id"`\n    Username string `json:"username" xorm:"username"`\n    Email    string `json:"email" xorm:"email"`\n    Status   int    `json:"status" xorm:"status"`\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"392-api-\u6587\u6863",children:"3.9.2 API \u6587\u6863"}),"\n",(0,l.jsx)(n.h4,{id:"\u6587\u6863\u6ce8\u91ca",children:"\u6587\u6863\u6ce8\u91ca"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// CreateUser \u521b\u5efa\u65b0\u7528\u6237\n// \n// @Summary \u521b\u5efa\u65b0\u7528\u6237\n// @Description \u521b\u5efa\u65b0\u7684\u7528\u6237\u8d26\u6237\n// @Tags users\n// @Accept json\n// @Produce json\n// @Param user body CreateUserRequest true "\u7528\u6237\u4fe1\u606f"\n// @Success 200 {object} User "\u521b\u5efa\u6210\u529f"\n// @Failure 400 {object} ErrorResponse "\u53c2\u6570\u9519\u8bef"\n// @Failure 500 {object} ErrorResponse "\u7cfb\u7edf\u9519\u8bef"\n// @Router /api/users [post]\nfunc (c *UserController) CreateUserAction() {\n    // \u5b9e\u73b0\u903b\u8f91\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"310-\u90e8\u7f72\u89c4\u8303",children:"3.10 \u90e8\u7f72\u89c4\u8303"}),"\n",(0,l.jsx)(n.h3,{id:"3101-docker-\u5316",children:"3.10.1 Docker \u5316"}),"\n",(0,l.jsx)(n.h4,{id:"dockerfile",children:"Dockerfile"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dockerfile",children:'# \u591a\u9636\u6bb5\u6784\u5efa\nFROM golang:1.20-alpine AS builder\n\nWORKDIR /app\nCOPY go.mod go.sum ./\nRUN go mod download\n\nCOPY . .\nRUN CGO_ENABLED=0 GOOS=linux go build -o main .\n\n# \u751f\u4ea7\u73af\u5883\u955c\u50cf\nFROM alpine:latest\n\nRUN apk --no-cache add ca-certificates\nWORKDIR /root/\n\nCOPY --from=builder /app/main .\nCOPY --from=builder /app/conf ./conf\n\nEXPOSE 8080\nCMD ["./main"]\n'})}),"\n",(0,l.jsx)(n.h4,{id:"docker-composeyml",children:"docker-compose.yml"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"version: '3.8'\n\nservices:\n  app:\n    build: .\n    ports:\n      - \"8080:8080\"\n    environment:\n      - DB_HOST=mysql\n      - REDIS_HOST=redis\n    depends_on:\n      - mysql\n      - redis\n    volumes:\n      - ./logs:/app/logs\n\n  mysql:\n    image: mysql:8.0\n    environment:\n      MYSQL_ROOT_PASSWORD: password\n      MYSQL_DATABASE: myapp\n    volumes:\n      - mysql_data:/var/lib/mysql\n      - ./sql/init:/docker-entrypoint-initdb.d\n\n  redis:\n    image: redis:7-alpine\n\nvolumes:\n  mysql_data:\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3102-\u73af\u5883\u914d\u7f6e",children:"3.10.2 \u73af\u5883\u914d\u7f6e"}),"\n",(0,l.jsx)(n.h4,{id:"\u751f\u4ea7\u73af\u5883\u53d8\u91cf",children:"\u751f\u4ea7\u73af\u5883\u53d8\u91cf"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# .env.production\nAPP_ENV=production\nAPP_DEBUG=false\nAPP_PORT=8080\n\n# \u6570\u636e\u5e93\u914d\u7f6e\nDB_HOST=prod-db.example.com:3306\nDB_USERNAME=app_user\nDB_PASSWORD=secure_password\nDB_DATABASE=myapp_prod\n\n# Redis \u914d\u7f6e\nREDIS_HOST=prod-redis.example.com:6379\nREDIS_PASSWORD=redis_password\n\n# JWT \u914d\u7f6e\nJWT_SECRET=super_secret_jwt_key\nJWT_EXPIRE=86400\n\n# \u65e5\u5fd7\u914d\u7f6e\nLOG_LEVEL=warn\nLOG_FILE=/app/logs/app.log\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,l.jsx)(n.p,{children:"\u5efa\u7acb\u826f\u597d\u7684\u9879\u76ee\u7ed3\u6784\u548c\u9075\u5faa\u7edf\u4e00\u7684\u5f00\u53d1\u89c4\u8303\u662f\u6210\u529f\u9879\u76ee\u7684\u57fa\u7840\u3002\u901a\u8fc7\u672c\u7ae0\u7684\u4ecb\u7ecd\uff0c\u60a8\u5e94\u8be5\u80fd\u591f\uff1a"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5efa\u7acb\u6807\u51c6\u9879\u76ee\u7ed3\u6784"}),": \u4e86\u89e3\u5b8c\u6574\u7684\u76ee\u5f55\u7ec4\u7ec7\u548c\u6587\u4ef6\u547d\u540d\u89c4\u8303"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u9075\u5faa\u4ee3\u7801\u89c4\u8303"}),": \u638c\u63e1\u53d8\u91cf\u3001\u51fd\u6570\u3001\u6587\u4ef6\u7684\u547d\u540d\u7ea6\u5b9a"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7ec4\u7ec7\u4ee3\u7801\u5c42\u6b21"}),": \u7406\u89e3 MVC \u67b6\u6784\u5404\u5c42\u7684\u804c\u8d23\u5206\u5de5"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7ba1\u7406\u914d\u7f6e"}),": \u719f\u7ec3\u4f7f\u7528\u591a\u73af\u5883\u914d\u7f6e\u7ba1\u7406"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u8bbe\u8ba1\u6570\u636e\u5e93"}),": \u9075\u5faa\u8868\u8bbe\u8ba1\u548c ORM \u4f7f\u7528\u89c4\u8303"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6784\u5efa API"}),": \u8bbe\u8ba1\u89c4\u8303\u7684 RESTful API"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7f16\u5199\u6d4b\u8bd5"}),": \u5efa\u7acb\u5b8c\u6574\u7684\u6d4b\u8bd5\u4f53\u7cfb"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7248\u672c\u63a7\u5236"}),": \u4f7f\u7528\u89c4\u8303\u7684 Git \u5de5\u4f5c\u6d41"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7f16\u5199\u6587\u6863"}),": \u4e3a\u4ee3\u7801\u548c API \u6dfb\u52a0\u6e05\u6670\u6587\u6863"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u90e8\u7f72\u5e94\u7528"}),": \u5bb9\u5668\u5316\u90e8\u7f72\u548c\u73af\u5883\u914d\u7f6e"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u8fd9\u4e9b\u89c4\u8303\u548c\u6700\u4f73\u5b9e\u8df5\u5c06\u5e2e\u52a9\u60a8\u6784\u5efa\u9ad8\u8d28\u91cf\u3001\u53ef\u7ef4\u62a4\u7684 Nyx \u9879\u76ee\u3002\u5efa\u8bae\u5728\u9879\u76ee\u5f00\u59cb\u65f6\u5c31\u5efa\u7acb\u8fd9\u4e9b\u89c4\u8303\uff0c\u786e\u4fdd\u6574\u4e2a\u5f00\u53d1\u8fc7\u7a0b\u7684\u4e00\u81f4\u6027\u548c\u89c4\u8303\u6027\u3002"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(t,{...e})}):t(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>c});var s=r(6540);const l={},i=s.createContext(l);function d(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);